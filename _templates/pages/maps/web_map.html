
{% load i18n %}
{% block content %}
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css">
    
    <div id="viewDiv" style="height: 700px;"></div>

    <script src="https://js.arcgis.com/4.26/"></script>
    <script>           
      require(["esri/config", "esri/Map", "esri/layers/FeatureLayer","esri/views/MapView","esri/widgets/Expand"
      ,"esri/widgets/LayerList","esri/widgets/Legend"],
       function(esriConfig, Map,FeatureLayer, MapView,Expand,LayerList,Legend) {

        esriConfig.portalUrl = "https://www.arcgisbd.com/portal/";
        esriConfig.apiKey = "YOUR_API_KEY";
        //https://www.arcgisbd.com/server/rest/services/Hosted/Division/FeatureServer/0
        var layerURL = "https://www.arcgisbd.com/server/rest/services/Hosted/Historical_Rangamati_landslide_location/FeatureServer/";
        var layer = new FeatureLayer({
            title: "Historical Rangamati landslide location",
            url: layerURL,
            outFields: ["*"],
            copyright: "CEGIS"
        });

        var layerDivision = new FeatureLayer({
            title: "Division",
            url: "https://www.arcgisbd.com/server/rest/services/Hosted/Division/FeatureServer/",
            outFields: ["*"],
            copyright: "CEGIS"
        });

        const map = new Map({
          basemap: "arcgis-topographic",
          layers: [layer,layerDivision]
        });
        //Latitude: 22.6500 Longitude: 92.1833.
        const view = new MapView({
          map: map,
          //center: [90.537777, 23.737777], // Longitude, latitude
          center: [92.1833, 22.6500], // Longitude, latitude
          zoom: 9, // Zoom level
          container: "viewDiv", // Div element
          ui: {
            components: ["zoom", "compass", "navigation-toggle"]
        }
          
        });
        const layerList = new LayerList({
            view: view,
            listItemCreatedFunction: function (event) {
                const item = event.item;
                if (item.layer.type != "group") {
                    // don't show legend twice
                    item.panel = {
                        content: "legend",
                        open: true
                    };
                }
            }
        });
        view.ui.add(
                [
                    new Expand({
                        view: view,
                        content: layerList,
                        expandTooltip: "Map Layers",
                        group: "top-left"
                    }),
                    new Expand({
                        view: view,
                        content: new Legend({ view: view }),
                        expandTooltip: "Map Legend",
                        group: "top-left",
                        expanded: false
                    })
                ],
                "top-left"
            );
      });
       
    </script>
{% endblock content %}
